{% extends "core/base.html" %}
{% block title %}نتایج جستجو برای: "{{ query }}"{% endblock %}
{% block content %}
<div class="container py-5">
    <div class="text-center mb-5"><h2 class="display-5 fw-bold">نتایج جستجو</h2>{% if query %}<p class="lead text-muted">جستجو برای عبارت: «{{ query }}»</p>{% endif %}</div>
    {% if not has_results %}
    <div class="alert alert-warning text-center"><h4 class="alert-heading">نتیجه‌ای یافت نشد!</h4><p>برای عبارت جستجو شده، هیچ موردی در آثار متنی، صوتی یا تصویری یافت نشد.</p></div>
    {% else %}
        {% if video_results %}<h3 class="mb-4 border-bottom pb-2">آثار تصویری</h3><div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mb-5">{% for video in video_results %}<div class="col"><div class="card h-100 shadow-sm"><video controls preload="metadata" style="width: 100%;"><source src="{{ video.video_file.url }}" type="video/mp4"></video><div class="card-body"><h5 class="card-title">{{ video.title }}</h5></div></div></div>{% endfor %}</div>{% endif %}
        {% if audio_results %}<h3 class="mb-4 border-bottom pb-2">آثار صوتی</h3><div class="row row-cols-1 g-4 mb-5">{% for audio in audio_results %}<div class="col"><div class="card shadow-sm p-3"><h5 class="card-title">{{ audio.title }}</h5><audio controls class="w-100 mt-2" preload="metadata"><source src="{{ audio.audio_file.url }}" type="audio/mpeg"></audio></div></div>{% endfor %}</div>{% endif %}
        {% if text_results %}<h3 class="mb-4 border-bottom pb-2">آثار متنی</h3><div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">{% for text in text_results %}<div class="col"><div class="card h-100 shadow-sm"><div class="card-body d-flex flex-column"><h5 class="card-title">{{ text.title }}</h5><p class="card-text small text-muted flex-grow-1">{{ text.description|truncatewords:20 }}</p><a href="{{ text.file.url }}" class="btn btn-outline-primary mt-3" download><i class="bi bi-download me-2"></i>دانلود</a></div></div></div>{% endfor %}</div>{% endif %}
    {% endif %}
</div>
{% endblock %}